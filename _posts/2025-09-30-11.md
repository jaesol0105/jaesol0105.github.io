---
title:  "[11] Future와 Stream"
header:
  overlay_image: "https://image.artbox.co.kr/upload/C00001/goods/800_800/818/230525003912818.jpg?s=/goods/org/818/230525003912818.jpg"

excerpt: "dart, future, stream"

categories:
  - Flutter
tags:
  - [Flutter]
    
toc_label: "  목차"
toc: True
toc_sticky: True
---

# 2025-09-30

## Future
- 하나의 작업에 대해 값이나 이벤트가 **한 번** 발생하는 단일 비동기 작업에 사용.
- 작업당 결과값을 1번만 받을 수 있다.

### Future의 반환
```dart
Future<String> introduce(String name) async {
	print('$name의 자기소개 시작 !');
  
  await Future.delayed(Duration(seconds: 2), () {
    print('안녕 ? 나는 $name ~');
  });
	
	print('$name의 자기소개 끝 !');
  
  return '이름은 $name ~';
}

void main() async {
  var riverfuture = await introduce('강미래');
  var riverpresent = await introduce('강현재');
  print('나의 $riverfuture 너의 $riverpresent');
}
```
- 하나의 작업에 결과값이 여러 번 나오는 경우는 어떻게 할까?
- Stream을 사용하여 결과값을 받는다.

<br>

## Stream
- 하나의 작업에 대해 값이나 이벤트가 여러 번 발생하는 경우에 사용
- 비동기 연산의 결과값이 여러 번 반환되는 경우 그 값을 순차적으로 받기 위해 사용
- 결과값을 한 번 반환하고 나면 실행이 종료되는 Future 와 다르게 직접 실행을 종료해 주어야 실행이 종료되고, 실행을 종료해 주지 않으면 계속 실행된다.
- 결과값의 타입은 `Stream`

```dart
Steam<int> number = Steam.value(1);
Steam<String> name = Steam.value('강미래');
Steam<bool> isOddNumber = Steam.value(1.isOdd);
```
- Steam<bool> 은 bool 이랑 같은데 단지 Steam 이 감싸고 있을 뿐이라고 생각하면 된다.
- 아래의 예제를 통해 자세히 알아보자.

### yield
- 값을 방출하도록 하는 키워드
```
Stream<String> emitNames() async* {
  yield '강미래';
  yield '강현재';
  yield '강과거';
}
```
- Future 를 반환 타입으로 갖는 함수는 `async` 를 사용했는데, Stream 을 반환 타입으로 갖는 함수는 `async*` 을 사용한다.
- yield 옆에 있는 값의 타입이랑 Stream<타입> 에 있는 타입은 당연히 같아야한다.
- 참고로, Stream 에서는 반환 대신 방출 이라는 단어를 사용한다.

### listen()
- yield 를 통해 방출되는 값을 받기 위해 사용하는 메서드

```
Stream<String> emitNames() async* {
  yield '강미래';
  yield '강현재';
  yield '강과거';
}

void main() {
  int number = 1;
  
  emitNames().listen((name) {
    print('$number번째는 $name ~');
    number += 1;
  });
}
```

- 이런식으로 값이 방출될때마다 값을 받을 수 있다.

<br>
<br>
